function streamgraph(){function a(a){var d=a.append("g").attr("class","axes");b(d),c(d)}function b(a){var b=d3.svg.axis().scale(l.range([0,j()])).orient("bottom");a.append("g").attr("class","x axis").attr("transform",function(){return"translate("+g()+","+(h()+50)+")"}).call(b)}function c(){d3.svg.axis().scale(m.range([k(),0])).orient("left")}function d(a){var b=5;a.append("defs").append("clipPath").attr("id","body-clip").append("rect").attr("x",0-b).attr("y",0).attr("width",j()+2*b).attr("height",k())}function e(a){o||(o=a.append("g").attr("class","body").attr("transform","translate("+g()+","+i()+")").attr("clip-path","url(#body-clip)"));var b=d3.layout.stack().offset("wiggle"),c=b(t);f(c)}function f(a){var b=d3.svg.area().interpolate("cardinal").x(function(a){return l(a.x)}).y0(function(a){return m(a.y0)}).y1(function(a){return m(a.y+a.y0)}),c=d3.scale.category20();o.selectAll("path.area").data(a).enter().append("path").style("fill",function(){var a=Math.floor(100*Math.random()%20);return c.range()[a]}).attr("class","area"),o.selectAll("path.area").data(t).transition().duration(400).attr("d",function(a){return b(a)})}function g(){return s.left}function h(){return r-s.bottom}function i(){return s.top}function j(){return q-s.left-s.right}function k(){return r-s.top-s.bottom}var l,m,n,o,p={},q=900,r=450,s={top:0,left:40,right:40,bottom:120},t=[],u=d3.scale.category20();return p.render=function(){n||(n=d3.select("#graph").append("svg").attr("height",r).attr("width",q),a(n),d(n)),e(n)},p.width=function(a){return arguments.length?(q=a,p):q},p.height=function(a){return arguments.length?(r=a,p):r},p.margins=function(a){return arguments.length?(s=a,p):s},p.colors=function(a){return arguments.length?(u=a,p):u},p.x=function(a){return arguments.length?(l=a,p):l},p.y=function(a){return arguments.length?(m=a,p):m},p.addSeries=function(a){return t.push(a),p},p}angular.module("egApp",[]).factory("d3Service",[function(){var a;return a=window.d3}]);var app=angular.module("egApp",["ngRoute"]);app.config(["$routeProvider",function(a){a.when("/home",{templateUrl:"pages/home.html",reloadOnSearch:!1}).when("/about",{templateUrl:"pages/about.html",reloadOnSearch:!1}).when("/contact",{templateUrl:"pages/contact.html",reloadOnSearch:!1}).when("/streamgraph",{templateUrl:"pages/streamgraph.html",controller:"StreamController",reloadOnSearch:!1}).when("/piechart",{templateUrl:"pages/piechart.html",controller:"PieChartController",reloadOnSearch:!1}).when("/projects",{templateUrl:"pages/projects.html",reloadOnSearch:!1}).when("/tags",{templateUrl:"pages/tags.html",controller:"TagsController",reloadOnSearch:!1}).when("/stylesheet",{templateUrl:"pages/stylesheet.html",reloadOnSearch:!1})}]),app.controller("LettersController",["$rootScope","$scope","$http","$location",function(a,b,c,d){b.myData={},c.get("json/eg.json").then(function(a){b.myData.words=a.data,e()},function(a,b){console.log("Error: didnnt get JSON"+a+b)}),b.projectsData={},c.get("json/projects.json").then(function(a){b.projectsData.sites=a.data},function(a,b){console.log("Error: didnnt get JSON"+a+b)}),b.getClass=function(a){return d.path()?d.path().substr(1,a.length)===a?"":"selected":"home"===a?"selected":void 0},a.getScrolled=function(){return a.scrolled},window.onscroll=function(b){"scrolled"!==a.scrolled&&document.body.scrollTop>200?(a.$apply(function(){a.scrolled="scrolled"}),f(0,12)):"midscroll"!==a.scrolled&&document.body.scrollTop>20&&document.body.scrollTop<200?(a.$apply(function(){a.scrolled="midscroll"}),f(0,12)):a.scrolled&&document.body.scrollTop<20&&(a.$apply(function(){a.scrolled=""}),f(0,0))},b.getFlipperPos=function(){return a.scrolled?a.scrolled:"/home"===d.path()||""===d.path()?"":"subPage"},b.$on("$routeChangeSuccess",function(a,c){b.transitionState="active",c&&"pages/streamgraph.html"!==c.loadedTemplateUrl&&(d3.select("svg").remove(),b.streamData=0),c&&"pages/home.html"===c.loadedTemplateUrl?f(0,0):c&&"pages/contact.html"===c.loadedTemplateUrl?f(0,4):c&&"pages/about.html"===c.loadedTemplateUrl?f(0,0):c&&"pages/projects.html"===c.loadedTemplateUrl&&f(4,12)}),b.getImage=function(a){return a.thumbnail?a.thumbnail:""};var e=function(){b.template=b.myData.words[0],b.myData.words.doClick=function(c,d){b.action=d.action,"drawGraph"===b.action&&a.$emit("loadStream"),"piechart"===b.action&&a.$emit("loadPie"),a.emailSelected="email"===b.action?"selected":"",a.linkedInSelected="linkedin"===b.action?"selected":"",a.githubSelected="github"===b.action?"selected":"",a.resumeSelected="resume"===b.action?"selected":""},b.myData.words.doHover=function(c,d,e){e.stopPropagation(),"drawGraph"===b.action&&a.$emit("updateStream"),"piechart"===b.action&&a.$emit("updatePie")}},f=function(a,b){angular.forEach(angular.element(".flip-container"),function(c,d){var e=angular.element(c);e.hasClass("hover")&&e.removeClass("hover"),d>=a&&b>d&&setTimeout(function(){e.addClass("hover")},150*(d-a))})}}]),app.controller("PieChartController",["$rootScope","$scope","$http","PieService",function(a,b,c,d){var e=!1;setTimeout(function(){e=d.newChart(9*Math.random()+1)},1),a.$on("loadPie",function(){e=d.newChart(9*Math.random()+1)}),a.$on("updatePie",function(){e&&d.update()})}]),app.controller("StreamController",["$rootScope","$scope",function(a,b){b.$on("$routeChangeSuccess",function(){b.transitionState="active",b.streamData=0,c()}),a.$on("loadStream",function(){c()}),a.$on("updateStream",function(){b.streamData&&d()}),b.randomData=function(){return 6*Math.random()};var c=function(){var a=Math.floor(10*Math.random())+4;b.numberOfDataPoint=Math.floor(51*Math.random())+5,d3.select("svg").remove(),b.streamData=[];for(var c=0;a>c;++c)b.streamData.push(d3.range(b.numberOfDataPoint).map(function(a){return{x:a,y:0===a||a===b.numberOfDataPoint-1?0:b.randomData()}}));b.chart=streamgraph().x(d3.scale.linear().domain([0,b.numberOfDataPoint-1])).y(d3.scale.linear().domain([0,65])).colors(d3.scale.linear().range(["#aad","#556"])),b.streamData.forEach(function(a){b.chart.addSeries(a)}),b.chart.render(),setTimeout(function(){d()},.4);var e=0,f=setInterval(function(){d(),2===++e&&window.clearInterval(f)},400)},d=function(){for(var a=0;a<b.streamData.length;++a){var c=b.streamData[a];c.length=0;for(var d=0;d<b.numberOfDataPoint;++d)c.push({x:d,y:0===d||d===b.numberOfDataPoint-1?0:b.randomData()})}b.chart.render()}}]),app.controller("TagsController",["$rootScope","$scope","$http",function(a,b,c){function d(a,b){this.key=a,this.value=b}function e(b){a.wordOBJ=[],$(".words svg").remove(),b.split("").forEach(function(b,c){a.wordOBJ.push(new d(c,b))})}c.get("json/tags.json").then(function(a){b.tagData=a.data},function(a,b){console.log("Error: didnnt get JSON"+a+b)}),e("var add = (function () { var counter = 0; return function () {return counter += 1;}})(); add();"),b.changeWord=function(a){var b=a.description?a.description:a.name;e(b)},b.$watch(function(){return a.wordOBJ},function(a,b){a&&a.length!==b.length})}]),app.directive("letter",["$compile","$http","$templateCache",function(a,b,c){var d=function(a){var d,e="svg/",f="abcdefghijklmnopqrstuvwxyz1234567890(){}=+;<>-";return a=a.toLowerCase(),e+=f.indexOf(a)>-1?a+".svg":"/"===a?"slash.svg":":"===a?"colon.svg":"blank.svg",d=b.get(e,{cache:c})},e=function(b,c){var e=d(b.myletter.value);e.success(function(a){c.html(a)}).then(function(){c.replaceWith(a(c.html())(b))})};return{restrict:"E",scope:{myletter:"="},link:e}}]),app.factory("PieService",function(){function a(){function a(a,c){f||(f=a.append("g").attr("class","body"));for(var d=0;c>d;d++)b(50*d,0)}function b(a){var b=d3.layout.pie().sort(function(a){return a.id}).value(function(a){return a.value}),e=90*Math.abs(Math.sin(a))+a/30,h=m+e,k=n+e,l=d3.svg.arc().outerRadius(h).innerRadius(k),o=i/6+a/2,p=j/2-30;g=f.append("g").attr("class","pie").attr("transform-origin","left").attr("transform","translate("+o+","+p+")"),c(b,l),d(b,l)}function c(a,b){var c=g.selectAll("path.arc").data(a(k));c.enter().append("path").attr("class","arc").attr("fill",function(){var a=Math.floor(100*Math.random()%20);return l.range()[a]}),c.transition().attrTween("d",function(a){var c=this.__current__;c||(c={startAngle:0,endAngle:0});var d=d3.interpolate(c,a);return this.__current__=d(1),function(a){return b(d(a))}})}function d(a,b){var c=g.selectAll("text.label").data(a(k));c.enter().append("text").attr("class","label"),c.transition().attr("transform",function(a){return"translate("+b.centroid(a)+")"}).attr("dy",".35em").attr("text-anchor","middle").text(function(a){return a.data.id})}var e,f,g,h={},i=1200,j=600,k=[],l=d3.scale.category20b(),m=200,n=100;return h.render=function(b){e||(e=d3.select("#pie-chart").append("svg").attr("height",j).attr("width",i)),a(e,b)},h.update=function(a){for(var c=0;a>c;c++)b(c,100*c)},h.width=function(a){return arguments.length?(i=a,h):i},h.height=function(a){return arguments.length?(j=a,h):j},h.colors=function(a){return arguments.length?(l=a,h):l},h.radius=function(a){return arguments.length?(m=a,h):m},h.innerRadius=function(a){return arguments.length?(n=a,h):n},h.data=function(a){return arguments.length?(k=a,h):k},h}var b,c,d=function(){return 9*Math.random()+1},e={};return e.update=function(){},e.newChart=function(e){var f=4*Math.random()+4,g=50*Math.random()+10;return d3.select("svg").remove(),b=d3.range(e).map(function(a){return{id:a,value:d()}}),c=a().radius(g+f).innerRadius(g).data(b),c.render(10*Math.random()+20),!0},e});